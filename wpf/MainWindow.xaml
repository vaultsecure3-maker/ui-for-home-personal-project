<Window x:Class="DocumentManagement.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="Paperless-NGX" Height="900" Width="1400"
        Background="{StaticResource Gray50Brush}"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        WindowStartupLocation="CenterScreen">

    <Grid RowDefinitions="64,*">
        <!-- Header -->
        <Border Grid.Row="0" Background="White" BorderBrush="{StaticResource Gray200Brush}" BorderThickness="0,0,0,1"
                Effect="{StaticResource MaterialDesignShadowDepth1}">
            <Grid ColumnDefinitions="*,Auto,*">
                <!-- Left: Sync Status -->
                <Button Grid.Column="0" HorizontalAlignment="Left" Style="{StaticResource GhostButtonStyle}" 
                        Margin="24,0,0,0" ToolTip="Last sync: 2 minutes ago">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <materialDesign:PackIcon Kind="Cloud" Width="16" Height="16" Foreground="{StaticResource Green600Brush}" />
                        <TextBlock Text="Synced 2m ago" Style="{StaticResource CaptionStyle}" VerticalAlignment="Center" 
                                  Foreground="{StaticResource Gray600Brush}"/>
                    </StackPanel>
                </Button>

                <!-- Center: Title -->
                <TextBlock Grid.Column="1" Text="Paperless-NGX" Style="{StaticResource TitleMediumStyle}"
                          VerticalAlignment="Center" FontWeight="Bold" />

                <!-- Right: Logout -->
                <Button Grid.Column="2" HorizontalAlignment="Right" Style="{StaticResource GhostButtonStyle}"
                        Margin="0,0,24,0" Command="{Binding LogoutCommand}">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <materialDesign:PackIcon Kind="Logout" Width="16" Height="16" />
                        <TextBlock Text="Logout" Style="{StaticResource BodySmallStyle}" VerticalAlignment="Center" 
                                  Foreground="{StaticResource Gray700Brush}"/>
                    </StackPanel>
                </Button>
            </Grid>
        </Border>

        <!-- Main Content -->
        <Grid Grid.Row="1" ColumnDefinitions="Auto,*">
            <!-- Sidebar Container -->
            <Grid Grid.Column="0">
                <Border Background="White" BorderBrush="{StaticResource Gray200Brush}" BorderThickness="0,0,1,0"
                        Effect="{StaticResource MaterialDesignShadowDepth1}">
                    <Border.Style>
                        <Style TargetType="Border">
                            <Setter Property="Width" Value="256"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding SidebarExpanded}" Value="False">
                                    <DataTrigger.EnterActions>
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <DoubleAnimation Storyboard.TargetProperty="Width" To="80" Duration="0:0:0.3">
                                                    <DoubleAnimation.EasingFunction>
                                                        <CubicEase EasingMode="EaseInOut"/>
                                                    </DoubleAnimation.EasingFunction>
                                                </DoubleAnimation>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </DataTrigger.EnterActions>
                                    <DataTrigger.ExitActions>
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <DoubleAnimation Storyboard.TargetProperty="Width" To="256" Duration="0:0:0.3">
                                                    <DoubleAnimation.EasingFunction>
                                                        <CubicEase EasingMode="EaseInOut"/>
                                                    </DoubleAnimation.EasingFunction>
                                                </DoubleAnimation>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </DataTrigger.ExitActions>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>

                    <Grid RowDefinitions="Auto,*,Auto">
                        <!-- Toggle Button -->
                        <Button Grid.Row="0" Style="{StaticResource IconButtonStyle}" Margin="20,16"
                               Command="{Binding ToggleSidebarCommand}" HorizontalAlignment="Left">
                            <materialDesign:PackIcon Kind="Menu" Width="20" Height="20" />
                        </Button>

                        <!-- Navigation Items -->
                        <StackPanel Grid.Row="1" Spacing="8" Padding="16">
                        <Button Style="{StaticResource GhostButtonStyle}" Height="48" HorizontalContentAlignment="Left"
                               Command="{Binding NavigateToDocumentsCommand}" Background="{StaticResource Blue50Brush}">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <materialDesign:PackIcon Kind="FileDocument" Width="24" Height="24" />
                                <TextBlock Text="Documents" Style="{StaticResource BodyLargeStyle}" FontWeight="Medium"
                                          Visibility="{Binding SidebarExpanded, Converter={StaticResource BoolToVisibilityConverter}}"
                                          VerticalAlignment="Center" />
                            </StackPanel>
                        </Button>

                        <Button Style="{StaticResource GhostButtonStyle}" Height="48" HorizontalContentAlignment="Left"
                               Command="{Binding NavigateToUploadCommand}">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <materialDesign:PackIcon Kind="Upload" Width="24" Height="24" />
                                <TextBlock Text="Upload" Style="{StaticResource BodyLargeStyle}" FontWeight="Medium"
                                          Visibility="{Binding SidebarExpanded, Converter={StaticResource BoolToVisibilityConverter}}"
                                          VerticalAlignment="Center" />
                            </StackPanel>
                        </Button>

                        <Button Style="{StaticResource GhostButtonStyle}" Height="48" HorizontalContentAlignment="Left"
                               Command="{Binding NavigateToTagsCommand}">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <materialDesign:PackIcon Kind="Tag" Width="24" Height="24" />
                                <TextBlock Text="Tags" Style="{StaticResource BodyLargeStyle}" FontWeight="Medium"
                                          Visibility="{Binding SidebarExpanded, Converter={StaticResource BoolToVisibilityConverter}}"
                                          VerticalAlignment="Center" />
                            </StackPanel>
                        </Button>

                        <Button Style="{StaticResource GhostButtonStyle}" Height="48" HorizontalContentAlignment="Left"
                               Command="{Binding NavigateToCorrespondentsCommand}">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <materialDesign:PackIcon Kind="Building" Width="24" Height="24" />
                                <TextBlock Text="Correspondents" Style="{StaticResource BodyLargeStyle}" FontWeight="Medium"
                                          Visibility="{Binding SidebarExpanded, Converter={StaticResource BoolToVisibilityConverter}}"
                                          VerticalAlignment="Center" />
                            </StackPanel>
                        </Button>

                        <Button Style="{StaticResource GhostButtonStyle}" Height="48" HorizontalContentAlignment="Left"
                               Command="{Binding NavigateToDocumentTypesCommand}">
                            <StackPanel Orientation="Horizontal" Spacing="16">
                                <materialDesign:PackIcon Kind="FileMultiple" Width="24" Height="24" />
                                <TextBlock Text="Document Types" Style="{StaticResource BodyLargeStyle}" FontWeight="Medium"
                                          Visibility="{Binding SidebarExpanded, Converter={StaticResource BoolToVisibilityConverter}}"
                                          VerticalAlignment="Center" />
                            </StackPanel>
                        </Button>
                    </StackPanel>

                    <!-- Settings at Bottom -->
                    <Button Grid.Row="2" Style="{StaticResource GhostButtonStyle}" Height="48" HorizontalContentAlignment="Left"
                           Command="{Binding NavigateToSettingsCommand}" Margin="16,8,16,16">
                        <StackPanel Orientation="Horizontal" Spacing="16">
                            <materialDesign:PackIcon Kind="Cog" Width="24" Height="24" />
                            <TextBlock Text="Settings" Style="{StaticResource BodyLargeStyle}" FontWeight="Medium"
                                      Visibility="{Binding SidebarExpanded, Converter={StaticResource BoolToVisibilityConverter}}"
                                      VerticalAlignment="Center" />
                        </StackPanel>
                    </Button>
                </Grid>
            </Border>

            <!-- Content Area -->
            <ContentPresenter Grid.Column="1" Content="{Binding CurrentViewModel}" Background="{StaticResource Gray50Brush}" />
        </Grid>
    </Grid>
</Window>
